import groovy.json.JsonSlurper

class Secrets {
    Map m_data = null

    final String getProperty(final String key) {
        return (m_data && (m_data[key] != null)) ? m_data[key] : ''
    }
}

final def secretFile
if (System.getenv('SECRET_FILE')) {
    secretFile = file System.getenv().SECRET_FILE
} else {
    secretFile = file 'secret.json'
}

project.ext.secret = new Secrets()
if (secretFile.exists()) {
    secretFile.withReader {
        project.secret.m_data = new JsonSlurper().parse it
    }
} else {
    project.secret.m_data = new JsonSlurper().parseText(
            '{ "username" : "' + (System.getenv('userMaven') ?: '') + '",'
                    + '"password" : "' + (System.getenv('authMaven') ?: '') + '",'
                    + '"url" : "' + (System.getenv('urlMaven') ?: '') + '",'
                    + '"curseforgeAPIKey" : "' + (System.getenv('curse_auth') ?: '00000000-0000-0000-0000-000000000000') + '"}'
    )
}